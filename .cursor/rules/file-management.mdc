---
description: File management rules - where to create temp files, docs, and when to clean up
alwaysApply: true
---

# File Management Rules

âš ï¸ **å®Œæ•´æŒ‡å—è¯·æŸ¥çœ‹**: `AI_AGENT_GUIDE.md` (é¡¹ç›®æ ¹ç›®å½•)

## ğŸ“ Directory Structure

### Agent-Generated Files (å¾…å®¡æŸ¥å†…å®¹)
**Location**: `backend/agent-tbd/` 
- AI ç”Ÿæˆçš„è°ƒè¯•è¯Šæ–­
- ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„åˆ†æ
- å¾…ç¡®è®¤çš„æ¶æ„è®¾è®¡
- å®éªŒæ€§åŠŸèƒ½æ–‡æ¡£
- **ç”¨é€”**ï¼šä¸šåŠ¡ç›¸å…³å†…å®¹ï¼Œéœ€è¦ç”¨æˆ·å®¡æŸ¥åå†å½’æ¡£æˆ–åˆ é™¤

### Temporary Files (ä¼ ç»Ÿè°ƒè¯•)
**Location**: `temp/` (root level)
- éä¸šåŠ¡ç›¸å…³çš„è°ƒè¯•è¾“å‡º
- æµ‹è¯•ç»“æœ
- ä¸´æ—¶è„šæœ¬
- "é˜…åå³ç„š" files (delete after task completion)

### Documentation Files
**Location**: `backend/database/documents/` (for database-related docs)
**Location**: `docs/` (for general project docs)
- Design documents
- Decision records
- Historical notes
- Keep for archival/reference

### Business Code
**Location**: `backend/app/`, `frontend/`, etc.
- æ­£å¸¸çš„ä¸šåŠ¡ä»£ç è¿›å…¥å¯¹åº”æ–‡ä»¶å¤¹
- ä¸è¦å› ä¸ºæ˜¯ AI ç”Ÿæˆå°±æ”¾åˆ°ç‰¹æ®Šä½ç½®

### Output Files
**Location**: `output/` (root level)
- Processing results
- Generated reports
- Data exports
- Keep for review and analysis

### Input Files
**Location**: `input/` (root level)
- Test receipts
- Sample data
- User uploads for testing

## ğŸš¨ Critical Rules

### 1. Never Create Root-Level .md Files
âŒ **DON'T**: Create analysis files like `ANALYSIS.md`, `SUMMARY.md` in project root
âœ… **DO**: Create in `backend/agent-tbd/` or appropriate location

### 2. AI-Generated Content Classification
**ä¸šåŠ¡ç›¸å…³åˆ†æ/è°ƒè¯•** â†’ `backend/agent-tbd/`
- å°ç¥¨å¤„ç†é€»è¾‘è¯Šæ–­
- æ¶æ„è®¾è®¡è‰ç¨¿
- åŠŸèƒ½å®ç°åˆ†æ
- ç”¨æˆ·éœ€è¦reviewçš„å†…å®¹

**ä¼ ç»Ÿè°ƒè¯•/ä¸´æ—¶è¾“å‡º** â†’ `temp/`
- JSON è¾“å‡º
- æ—¥å¿—æ–‡ä»¶
- æµ‹è¯•ç»“æœ
- ä¸éœ€è¦reviewçš„ä¸´æ—¶æ–‡ä»¶

**æ­£å¸¸ä¸šåŠ¡ä»£ç ** â†’ å¯¹åº”çš„åŠŸèƒ½æ–‡ä»¶å¤¹
- ä¸è¦å› ä¸ºæ˜¯ AI ç”Ÿæˆå°±æ”¾ç‰¹æ®Šä½ç½®
- æŒ‰æ­£å¸¸é¡¹ç›®ç»“æ„ç»„ç»‡

### 3. Always Ask Before Creating Documentation
- If creating a design doc or decision record â†’ Ask user where to store it
- If it's a temporary analysis â†’ Use `backend/agent-tbd/`
- If it's permanent documentation â†’ Use `docs/` or `backend/database/documents/`

### 4. Clean Up Strategy
- At the end of a multi-step task, list files created in `backend/agent-tbd/`
- Ask: "è¿™äº›æ–‡ä»¶è¿˜éœ€è¦å—ï¼Ÿè¦å½’æ¡£åˆ° docs/ è¿˜æ˜¯åˆ é™¤ï¼Ÿ"
- For `temp/` files, ask: "è¦æˆ‘æ¸…ç† temp/ æ–‡ä»¶å¤¹å—ï¼Ÿ"
- Never auto-delete without asking

### 5. Backend Database Docs
All database-related documentation must go in `backend/database/documents/`:
- Migration notes
- Schema design docs
- Refactoring summaries
- Never create in `backend/database/` root

## ğŸ“ Examples

### Good Practice
```
backend/agent-tbd/
  FILE_CLEANUP_REPORT_20260212.md      # æ–‡ä»¶æ¸…ç†åˆ†æ
  DEBUG_LOGIC_DIAGNOSIS.md             # é€»è¾‘è¯Šæ–­
  ARCHITECTURE_DRAFT.md                # æ¶æ„è‰ç¨¿

temp/
  debug_output.json                    # è°ƒè¯•è¾“å‡º
  test_results.txt                     # æµ‹è¯•ç»“æœ
  
docs/
  architecture/
    system-design.md                   # æ°¸ä¹…æ–‡æ¡£
  decisions/
    2026-02-12-api-design.md           # å†³ç­–è®°å½•

backend/database/documents/
  PRODUCT_CATALOG_DESIGN.md            # æ•°æ®åº“è®¾è®¡æ–‡æ¡£

backend/app/services/
  my_new_service.py                    # æ­£å¸¸ä¸šåŠ¡ä»£ç 
```

### Bad Practice
```
# âŒ ä¸è¦è¿™æ ·ï¼š
PROJECT_ROOT/
  ANALYSIS.md                          # åº”è¯¥åœ¨ agent-tbd/
  SUMMARY.md
  DEBUG.md
  
backend/database/
  MY_NOTES.md                          # æ–‡æ¡£åº”è¯¥åœ¨ documents/ é‡Œ

backend/agent-tbd/
  my_service.py                        # ä¸šåŠ¡ä»£ç ä¸åº”è¯¥åœ¨è¿™é‡Œ
```

## ğŸ¯ Workflow

1. **Creating Analysis/Debug Files**:
   - **Business-related**: `backend/agent-tbd/FILE_NAME_YYYYMMDD.md`
   - **Debug outputs**: `temp/debug_output.json`
   - Always use descriptive timestamped names

2. **Creating Business Code**:
   - Put in appropriate functional folder (e.g., `backend/app/services/`)
   - Don't put in `agent-tbd/` just because it's AI-generated
   - Follow normal project structure

3. **Creating Documentation**:
   - Ask user: "è¿™ä¸ªæ–‡æ¡£æ˜¯ä¸´æ—¶åˆ†æè¿˜æ˜¯æ°¸ä¹…æ–‡æ¡£ï¼Ÿ"
   - Temporary analysis â†’ `backend/agent-tbd/`
   - Permanent documentation â†’ `docs/` or `backend/database/documents/`

4. **After Task Completion**:
   - List files created in `backend/agent-tbd/` and `temp/`
   - Ask: "agent-tbd/ é‡Œçš„æ–‡ä»¶ï¼šè¦å½’æ¡£è¿˜æ˜¯åˆ é™¤ï¼Ÿ"
   - Ask: "temp/ é‡Œçš„æ–‡ä»¶ï¼šè¦æˆ‘æ¸…ç†å—ï¼Ÿ"

5. **File Archival**:
   - If agent-tbd file has value, suggest moving to appropriate location
   - Example: "agent-tbd/analysis.md çœ‹èµ·æ¥æœ‰ç”¨ï¼Œè¦ç§»åˆ° docs/architecture/ å—ï¼Ÿ"
